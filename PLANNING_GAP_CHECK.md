# Savvy 기획 대비 반영 점검 (MVP 기준)

작성일: 2026-02-12  
기준: 현재 `main` 브랜치 최신 코드

## 1) 요약

- 핵심 흐름(랜딩 -> 온보딩 -> 대시보드 -> 카드분석 -> 리포트 -> 마이페이지)은 구현됨
- 계산 엔진과 입력/저장은 동작하지만, 일부 세법 디테일/고급 시각화/엣지케이스는 미구현 또는 단순화
- 최근 요구사항 반영으로 보험료 항목은 계산/화면에서 제외됨
- PDF 내보내기는 Phase 2 계획보다 앞서 구현 완료

## 2) 반영된 항목

| 구분 | 기획 항목 | 상태 | 구현 근거 |
|---|---|---|---|
| 랜딩 | 히어로 + CTA + 기능 소개 | 반영 | `lib/screens/landing_screen.dart` |
| 온보딩 | Step 1/2/3 + 진행률 | 반영 | `lib/screens/onboarding_screen.dart` |
| 온보딩 | 기본정보(나이/연봉/부양가족) | 반영 | `lib/screens/onboarding_screen.dart` |
| 온보딩 | 특수상황 체크 + 조건부 입력 | 반영 | `lib/screens/onboarding_screen.dart` |
| 온보딩 | 중도입사/이직 분기 입력 | 반영(확장 구현) | `lib/screens/onboarding_screen.dart` |
| 저장 | LocalStorage 유지 | 반영 | `lib/app/app_storage.dart` |
| 대시보드 | 요약 카드 + 항목 카드 + 리포트 이동 | 반영 | `lib/screens/dashboard_screen.dart` |
| 상세 입력 | 카드/기부/연금/주택/의료교육 편집 모달 | 반영 | `lib/widgets/tax_item_editor_dialog.dart` |
| 카드분석 | 25% 기준 진행률 + 비율 + 가이드 | 반영(차트 단순화) | `lib/screens/card_analysis_screen.dart` |
| 리포트 | 공제 breakdown + 계산과정 + 최적화 제안 | 반영 | `lib/screens/report_screen.dart` |
| 계산 엔진 | 과세표준/산출세액/감면/공제/기납부세액 추정 | 반영 | `lib/app/tax_calculator.dart` |
| PDF | 리포트 PDF 다운로드 | 반영 | `lib/app/report_pdf_service.dart`, `lib/screens/report_screen.dart` |

## 3) 미반영 또는 부분반영 항목

| 구분 | 기획 항목 | 현재 상태 | 비고 |
|---|---|---|---|
| 추천 로직 | 절세항목 6~8개 우선순위 정렬 추천 | 부분반영 | Step3 결과가 정적 칩 중심 |
| 상세 모달 | 슬라이더 기반 실시간 ROI, 아코디언 | 미반영 | 숫자 입력 중심 UI |
| 카드분석 | 월별 Bar 차트, 파이차트(fl_chart) | 미반영 | 텍스트/Progress 기반 |
| 대시보드 | FAB "항목 추가하기" | 미반영 | 탭/카드 편집 중심 |
| 모바일 내비 | 하단 고정 Bottom Bar | 미반영 | 상단/헤더 네비 중심 |
| 리포트 | 전년 대비 변화 | 미반영 | 현재 연도 기준 리포트 |
| 마이페이지 | 입력 데이터 전체 요약 / 로그아웃 | 미반영 | 기본 수정/초기화 위주 |
| 엣지케이스 | 비정상 지출 검증, SME 나이 기반 체크 비활성화 등 | 부분반영 | 일부 검증만 구현 |
| 테스트 | 계산 로직 단위테스트 세트 | 미반영 | 현재 샘플 테스트 1개 |

## 4) 기획과 다르게 적용된 항목

| 항목 | 기획 | 현재 구현 | 변경 영향 |
|---|---|---|---|
| 현재 월 입력 | 1~12월 드롭다운 | 월별 급여수령 칩 + 중도입사 자동채우기 | 현실 반영도 상승, 입력 복잡도 상승 |
| 중도입사 처리 | 체크박스 분기 | 첫직장/이직 + 전직장 소득/기납부세액 입력 | 계산 정밀도 향상 |
| 결정세액 처리 | `MAX(..., 0)` | 음수 허용 | 음수면 환급 관점 표현 가능 |
| 기납부세액 표시 | 일반 표시 | 리포트에서 음수 표시 | 부호 기반 계산흐름 직관화 |
| 최종 라벨 | 최종 환급/추가납부액 | 최종 세액(부호 기반) | 환급/납부를 숫자 부호로 구분 |
| 보험료 항목 | 자동 반영 강조 | 사용자 요청으로 계산/화면 제외 | 기획 대비 축소 (모델 필드만 잔존) |
| PDF 단계 | Phase 2/P2 | 현재 구현 완료 | 계획 대비 선반영 |

## 5) 데이터 모델/상태관리 차이

| 항목 | 기획 | 현재 구현 |
|---|---|---|
| 상태관리 | Provider 분리(UserProfile/TaxData/TaxCalculation/Navigation) | 단일 `AppState`에서 통합 관리 |
| 보험료 데이터 | 건강보험료 자동 계산 중심 | `Insurance` 모델 필드는 있으나 현재 계산 미사용 |
| 결과 모델 | 환급액 중심 | `finalTax`, `prepaidTax`, `refundAmount` + 리포트에서 `최종 세액` 표기 |

## 6) 계산 로직 점검 포인트

- 카드 공제 25% 문턱/공제율/한도 계산 반영
- 연금 세액공제(총급여 기준 16.5%/13.2%) 반영
- 기부금 세액공제(기본 15%, 1천만원 초과 30%) 반영
- 중소기업 청년 감면(산출세액의 90%) 반영
- 기납부세액은 현재 회사 급여 반영액 기준 5% 추정 + 전직장 입력분 합산

근거: `lib/app/tax_calculator.dart`

## 7) 다음 우선순위 제안

### P0

1. 계산 로직 단위테스트(경계값/중도입사/이직/감면/부호) 추가
2. 추천 로직을 정적 칩 -> 우선순위 기반 동적 결과로 전환
3. 엣지케이스 검증/가이드 메시지 확장

### P1

1. 카드분석 차트(fl_chart) 도입
2. 상세 모달 슬라이더/ROI/아코디언 추가
3. 마이페이지 데이터 요약/특수상황 바로가기 개선

### P2

1. 전년 데이터 비교(리포트)
2. 외부 연동(OCR, 홈택스/CSV, 알림)
